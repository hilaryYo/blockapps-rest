"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _fs=_interopRequireDefault(require("fs")),_path=_interopRequireDefault(require("path"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var cwd=_path.default.resolve(process.cwd()),nameStore=[];function getImportsTree(e){var t=[];isImported(e);for(var r=_fs.default.readFileSync(e).toString().split("\n"),i=splitPath(e),n=0;n<r.length;n++){var a=r[n];if(a.startsWith("import")){var p=getImportName(a),o=i+_path.default.sep+p;if(isImported(o))continue;t.push(o),t=t.concat(getImportsTree(o))}}return t}function getImportName(e){return e.split('"').slice(-2,-1)[0]}function readFileLines(e){var t="";isImported(e);for(var r=_fs.default.readFileSync(e).toString().split("\n"),i=0;i<r.length;i++){var n=r[i];n.startsWith("import")?t+=importFile(e,n)+"\n":t+=(n=n.replace("\r"," "))+"\n"}return t}function importFile(e,t){var r="//"+t+"\n",i=t.replace(/import[\s]+/i,"").replace(/\"/gi,"").replace(";","");if(isImported(i=i.replace("\r","")))return r+="// exists\n";if(0==i.indexOf("/"))return r+readFileLines(_path.default.join(cwd,i));var n=splitPath(e);return r+readFileLines(_path.default.join(n,i))}function isImported(e){var t=e.split(_path.default.sep),r=(t=t.length<=1?e.split("/"):t).pop();return-1<nameStore.indexOf(r)||(nameStore.push(r),!1)}function splitPath(e){var t=e.split(_path.default.sep);return(t=t.length<=1?e.split("/"):t).slice(0,t.length-1).join(_path.default.sep)}function combine(r){return nameStore=[],new Promise(function(e,t){e(readFileLines(r))})}var _default={combine:combine};exports.default=_default;
//# sourceMappingURL=importer.js.map
